<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- <script src="https://cdn.jsdelivr.net/gh/ChunRed/GRed_shuffle@main/index.js"></script> -->

    <!-- <script src="https://cdn.jsdelivr.net/gh/ChunRed/GRed_shuffle@main/GRed_shuffle.js"></script> -->
</head> 


<body>
    <div class="test" >這些特殊符號是真特殊符號特殊符號</div>

    <script >

        // let pass_type = '█';

        let pass_type = ['█','█','▢'];

        class GRed_shuffle{

            
            constructor(HTMLElement){
                this.elemant =  HTMLElement;
                this.origin_text = this.elemant.innerHTML.split("");
                this.new_text = this.elemant.innerHTML.split("");
            }
            
            fade_in(i){
                this.new_text[i] = pass_type[Math.floor(Math.random() * pass_type.length)];
                this.elemant.innerHTML = "";
                for(let i=0; i<this.new_text.length; i++){
                    this.elemant.innerHTML += this.new_text[i];
                }
                
            }

            fade_out(i){
                this.new_text[i] = this.origin_text[i];
                this.elemant.innerHTML = "";
                for(let i=0; i<this.new_text.length; i++){
                    this.elemant.innerHTML += this.new_text[i];
                }
            }

            delay(flag){
                if(flag == 1){
                    for(let i=0; i<this.origin_text.length; i++){
                        this.timeout = setTimeout(() => this.fade_in(i), i*30);
                    }
                }
                else if(flag == 0){
                    for(let i=0; i<this.origin_text.length; i++){
                        this.timeout = setTimeout(() => this.fade_out(i), i*30);
                    }
                }
            }


            start(delay=0){
                setTimeout(() => this.delay(1),delay);
            }

            stop(delay=0){
                setTimeout(() => this.delay(0),delay);
            }
        }

        let text_path = document.querySelector('.test')
        let text = new GRed_shuffle(text_path);

        setInterval(function(){
            text.start(500);
            text.stop(600);
        },500);
        

        
    </script>
</body>



</html>